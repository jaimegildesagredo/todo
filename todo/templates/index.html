<!DOCTYPE HTML>
<html>
    <head>
        <title>Todo</title>
        <link href="{{static_url('styles.css')}}" rel="stylesheet" />
    </head>
    <body>
        <form method="POST">
            <input name="body" type="text" />
            <input name="add" type="submit" value="Add"/>
        </form>
        <ul id="tasks">
            {% for task in tasks %}
            <li>
                <form action="/tasks/{{task._id}}" method="POST">
                    <input name="done" class="done" type="checkbox" {% if task.done %}checked="checked"{% end %}/>
                    <input type="hidden" name="_method" value="PUT" />
                </form>
                <span>{{task.body}}</span>
                <form action="/tasks/{{task._id}}" method="POST">
                    <input name="remove" type="submit" value="&times;" />
                    <input type="hidden" name="_method" value="DELETE" />
                </form>
            </li>
            {% end %}
        </ul>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script>
            $(function() {
                $('.done').click(function() {
                    $(this).parent('form').submit();
                });
            });
        </script>
    </body>
</html>
